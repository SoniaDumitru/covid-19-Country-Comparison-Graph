[{"/Users/dumitrusonia/Development/covid-map/covid-19-chart/src/index.js":"1","/Users/dumitrusonia/Development/covid-map/covid-19-chart/src/App.js":"2","/Users/dumitrusonia/Development/covid-map/covid-19-chart/src/components/Graph.js":"3"},{"size":219,"mtime":1609954259439,"results":"4","hashOfConfig":"5"},{"size":3045,"mtime":1609964251160,"results":"6","hashOfConfig":"5"},{"size":889,"mtime":1609964270922,"results":"7","hashOfConfig":"5"},{"filePath":"8","messages":"9","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"10"},"1cf0jq5",{"filePath":"11","messages":"12","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"13","usedDeprecatedRules":"10"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/dumitrusonia/Development/covid-map/covid-19-chart/src/index.js",[],["16","17"],"/Users/dumitrusonia/Development/covid-map/covid-19-chart/src/App.js",["18"],"import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Graph from './components/Graph';\nimport Select from 'react-select';\n\nfunction App() {\n\n  const [data, setData] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [options, setOptions] = useState([])\n  const [firstLabel, setFirstLable] = useState('US');\n  const [secondLable, setSecondLable] = useState('ITALY');\n  const [firstSelect, setFirstSelect] = useState(226);\n  const [secondSelect, setSecondSelect] = useState(138);\n\n  //fetch github data\n  const runCall = async () => {\n    let apiValue = await fetchData();\n    const header = apiValue.split('\\n').slice(0).map(line => (line.split(',')))[0].slice(4);\n\n    const firstPrep = apiValue.split('\\n').slice(0).map(line => (line.split(',')))[firstSelect]\n    const secondPrep = apiValue.split('\\n').slice(0).map(line => (line.split(',')))[secondSelect]\n\n    const firstLbl = firstPrep[1].toUpperCase();\n    const secondLbl = secondPrep[1].toUpperCase();\n\n    const formatData = [];\n    for (let i = 4; i < header.length; i++) {\n      const newRow = {};\n      newRow.name = header[i];\n      newRow[firstLbl] = parseInt(firstPrep[i]);\n      newRow[secondLbl] = parseInt(secondPrep[i]);\n      formatData.push(newRow);\n    }\n\n    const countriesList = apiValue.split('\\n').slice(1).map(line => (line.split(',').slice(0, 2)));\n    const countriesArr = [];\n    for (let i = 0; i < countriesList.length; i++) {\n      countriesArr.push({ label: countriesList[i].reverse().join(' : '), value: i + 1 })\n    }\n\n    setFirstLable(firstLbl);\n    setSecondLable(secondLbl);\n    setOptions(countriesArr)\n    setData(formatData);\n    setIsLoading(false);\n    return null;\n  }\n\n  //inner helper fetch function\n  const fetchData = async () => {\n    const requestOption = {\n      method: \"GET\",\n      redirect: \"follow\"\n    }\n\n    const apiUrl = `https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv`\n\n    try {\n      const response = await fetch(apiUrl, requestOption);\n      return response.ok ? response.text() : null\n    } catch (err) {\n      console.log(err);\n      return null;\n    }\n  }\n\n  //calls api everytime select changes. \n  //refactor to cache data\n  useEffect(() => {\n    runCall();\n  }, [firstSelect, secondSelect])\n\n  const firstInput = (input) => {\n    setFirstSelect(input.value)\n  }\n\n  const secondInput = (input) => {\n    setSecondSelect(input.value)\n  }\n\n  return (\n    <div className=\"app-wrap\">\n\n      <h1>COVID-19 Confirmed Cases</h1>\n      {isLoading ?\n        <div>loading...</div> :\n        <div className=\"content-wrap\">\n          <Graph data={data} label_1={firstLabel} label_2={secondLable} />\n          <div className=\"selector-wrap\">\n            <Select options={options} onChange={firstInput} placeholder=\"US\" />\n            <Select options={options} onChange={secondInput} placeholder=\"ITALY\" />\n          </div>\n        </div>\n      }\n    </div>\n  );\n}\nexport default App;","/Users/dumitrusonia/Development/covid-map/covid-19-chart/src/components/Graph.js",[],{"ruleId":"19","replacedBy":"20"},{"ruleId":"21","replacedBy":"22"},{"ruleId":"23","severity":1,"message":"24","line":72,"column":6,"nodeType":"25","endLine":72,"endColumn":33,"suggestions":"26"},"no-native-reassign",["27"],"no-negated-in-lhs",["28"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'runCall'. Either include it or remove the dependency array.","ArrayExpression",["29"],"no-global-assign","no-unsafe-negation",{"desc":"30","fix":"31"},"Update the dependencies array to be: [firstSelect, runCall, secondSelect]",{"range":"32","text":"33"},[2340,2367],"[firstSelect, runCall, secondSelect]"]